<head>
<meta name="description" content="SuperSCS: Fast and Accurate Conic Programming"/>
<meta name="keywords" content="Optimization, Conic Programming, Conic Problems, Cone Programs"/>
<meta name="distribution" content="Global"/>
<meta name="author" content="Pantelis Sopasakis"/>
<meta name="robots" content="index,follow"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta charset="UTF-8"/>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>SuperSCS: SuperSCS: Fast &amp; Accurate conic programming</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="dox_extra.css" rel="stylesheet" type="text/css"/>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-117903175-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-117903175-1');
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">SuperSCS
   &#160;<span id="projectnumber">1.3.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li class="current"><a href="pages.html"><span>All&#160;pages</span></a></li>
      <li><a href="annotated.html"><span>Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Examples in CVX MATLAB </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#sec_lasso">LASSO problem</a></li>
<li class="level1"><a href="#sec_SDP">Semidefinite Programming</a></li>
<li class="level1"><a href="#sec_log_reg">Logistic Regression</a></li>
<li class="level1"><a href="#sec_p_norm">Minimization of p-norm</a></li>
<li class="level1"><a href="#sec_another_problem">Norm-constrained minimum-norm problem</a></li>
<li class="level1"><a href="#sec_matrix_completion">Regularized matrix completion problem</a></li>
<li class="level1"><a href="#sec_portfolio">Portfolio selection</a></li>
<li class="level1"><a href="#sec_pca">Principal component analysis</a></li>
<li class="level1"><a href="#sec_superscs_config_factory">Easy configuration</a></li>
</ul>
</div>
<div class="textblock"><p>In what follows we give a few code snippets in MATLAB and compare SuperSCS with SCS.</p>
<p>This is a preliminary study to show that SuperSCS outperforms SCS, but a more thorough analysis is necessary.</p>
<p>In what follows we compare the two algorithms using five different types of problems: (i) a LASSO problem ( \(\ell_1\)-regularized least squares), (ii) a semidefinite program (SDP) and, in particular, a minimum-norm problem and an LMI-constrained problem, (iii) a logistic regression problem, (iv) a minimum \(p\)-norm problem, (v) a 2-norm-constrained minimum-norm problem and, last , (vi) a matrix completion problem involving the nuclear norm.</p>
<dl class="section note"><dt>Note</dt><dd>The following benchmarks are available in <a href="https://github.com/kul-forbes/scs/tree/master/tests/matlab">/tests/matlab/</a>.</dd>
<dd>
Reported runtimes were recorded on an Intel® Core™ i5-6200U CPU @ 2.30GHz × 4 machine with 11.6 GiB RAM running 64-bit Ubuntu 14.04.</dd>
<dd>
Both SuperSCS and SCS were compiled using <code>gcc</code> v4.8.5 and accessed via MATLAB® using a MEX interface.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>For the sake of reproducibility, we use</dd></dl>
<div class="fragment"><div class="line">rng(<span class="stringliteral">&#39;default&#39;</span>);</div>
<div class="line">rng(1);</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_lasso"></a>
LASSO problem</h1>
<p>We solve a simple <a href="https://en.wikipedia.org/wiki/Lasso_(statistics)">LASSO</a> problem of the form</p>
<p class="formulaDsp">
\[ \mathrm{Minimize}_x\ \textstyle\frac{1}{2} \|Ax-b\|^2 + \mu \|x\|_1, \]
</p>
<p>with \(x\in\mathbb{R}^n\), \(A\in\mathbb{R}^{m\times n}\).</p>
<p>Here \(n=10000\), \(m=2000\).</p>
<p>We define the problem data as follows:</p>
<div class="fragment"><div class="line">s = ceil(n/10);</div>
<div class="line">x_true=[randn(s,1);zeros(n-s,1)];</div>
<div class="line">x_true = x_true(randperm(n));</div>
<div class="line"></div>
<div class="line">density = 0.1;</div>
<div class="line">rcA = .1;</div>
<div class="line">A=sprandn(m,n,density,rcA);</div>
<div class="line"></div>
<div class="line">b = A*x_true + 0.1*randn(m,1);</div>
<div class="line">mu = 1;</div>
</div><!-- fragment --><p>Note that \(A\) is a <a class="el" href="page_sparse_matrices.html">sparse matrix</a> with density \(10\%\) and reciprocal condition number \(0.1\).</p>
<p>We then formulate the problem in CVX with accuracy \(\epsilon=10^{-4}\).</p>
<p>We solve it using SuperSCS with <a class="el" href="page_directions.html#sec-restarted-broyden">restarted Broyden</a> directions with memory \(100\) and using \(k_0=0\):</p>
<div class="fragment"><div class="line">do_super_scs = 0;</div>
<div class="line"></div>
<div class="line">tic;</div>
<div class="line">cvx_begin</div>
<div class="line">    cvx_solver <a class="code" href="scs_8h.html#a3b4841ccbabf8aaa56f3758bf8d771c1">scs</a></div>
<div class="line">    cvx_solver_settings(<span class="stringliteral">&#39;eps&#39;</span>, 1e-4,...</div>
<div class="line">        <span class="stringliteral">&#39;do_super_scs&#39;</span>,do_super_scs,...</div>
<div class="line">        <span class="stringliteral">&#39;direction&#39;</span>, 100,...</div>
<div class="line">        <span class="stringliteral">&#39;memory&#39;</span>, 100)</div>
<div class="line">    variable x_c(n)</div>
<div class="line">    minimize(0.5*sum_square(A*x_c - b) + mu*norm(x_c,1))</div>
<div class="line">cvx_end</div>
<div class="line">toc</div>
</div><!-- fragment --><p>Notice that we may pass any parameters to SCS using CVX's <code>cvx_solver_settings</code>.</p>
<p>SuperSCS with the above options terminates after \(169\) iterations and \(85.1\) s.</p>
<p>Instead, SCS requires \(3243\) iterations which corresponds to \(802\) s.</p>
<p>SuperSCS exhibits a speed-up of \(\times 9.4\).</p>
<dl class="section note"><dt>Note</dt><dd>Any values that are not overridden using <code>cvx_solver_settings</code> are set to their <a class="el" href="util_8h.html#ae2d5db9ab42a1c8efdb96c2d68e66e61">default values</a>.</dd></dl>
<h1><a class="anchor" id="sec_SDP"></a>
Semidefinite Programming</h1>
<p>Here we solve the problem </p>
<p class="formulaDsp">
\begin{eqnarray*} &amp;&amp;\mathrm{Minimize}_{Z}\ \|Z-P\|_{\mathrm{fro}}\\ &amp;&amp;Z\geq 0\\ &amp;&amp;Z: \mathrm{Hermitian},\ \mathrm{Toeplitz} \end{eqnarray*}
</p>
 <div class="fragment"><div class="line">n=800;</div>
<div class="line">P = randn(n,n);</div>
<div class="line">cvx_begin sdp</div>
<div class="line">cvx_solver <a class="code" href="scs_8h.html#a3b4841ccbabf8aaa56f3758bf8d771c1">scs</a></div>
<div class="line">cvx_solver_settings(<span class="stringliteral">&#39;eps&#39;</span>, 1e-4,...</div>
<div class="line">        <span class="stringliteral">&#39;do_super_scs&#39;</span>,1,...</div>
<div class="line">        <span class="stringliteral">&#39;memory&#39;</span>, 50)</div>
<div class="line">    variable Z(n,n) hermitian toeplitz</div>
<div class="line">    dual variable Q</div>
<div class="line">    minimize( norm( Z - P, &#39;fro&#39; ) )</div>
<div class="line">    Z &gt;= 0 : Q;</div>
<div class="line">cvx_end</div>
</div><!-- fragment --><p>SuperSCS solves this problem in \(218\)s ( \(103\) iterations), whereas SCS requires \(500\)s to terminate ( \(392\) iterations).</p>
<p>Another interesting SDP problem is that of determining a symmetric positive definite matrix \(P\) which solves</p>
<p class="formulaDsp">
\begin{eqnarray*} &amp;&amp;\mathrm{Minimize}_{P}\ \mathrm{trace}(P)\\ &amp;&amp;P=P&#39;\\ &amp;&amp;P \geq I\\ &amp;&amp;A&#39;P + PA \leq -I \end{eqnarray*}
</p>
<p>For this example we chose a (stable) matrix \(A\) with its eigenvalues uniformly logarithmically spaced between \(-10^{-1}\) and \(-10^{1}\).</p>
<div class="fragment"><div class="line">n=100;</div>
<div class="line">A = diag(-logspace(-0.5, 1, n));</div>
<div class="line">U = orth(randn(n,n));</div>
<div class="line">A = U<span class="stringliteral">&#39;*A*U;</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">tic</span></div>
<div class="line"><span class="stringliteral">cvx_begin sdp</span></div>
<div class="line"><span class="stringliteral">    cvx_solver scs</span></div>
<div class="line"><span class="stringliteral">    cvx_solver_settings(&#39;</span>eps<span class="stringliteral">&#39;, 1e-3,...</span></div>
<div class="line"><span class="stringliteral">        &#39;</span>do_super_scs<span class="stringliteral">&#39;, 1, ...</span></div>
<div class="line"><span class="stringliteral">        &#39;</span>memory<span class="stringliteral">&#39;, 100);</span></div>
<div class="line"><span class="stringliteral">    variable P(n,n) symmetric</span></div>
<div class="line"><span class="stringliteral">    minimize(trace(P))</span></div>
<div class="line"><span class="stringliteral">    A&#39;</span>*P + P*A &lt;= -eye(n)</div>
<div class="line">    P &gt;= eye(n)</div>
<div class="line">cvx_end    </div>
<div class="line">toc    </div>
</div><!-- fragment --><p>SuperSCS converges after \(40.7\)s ( \(314\) iterations), whereas SCS converges after \(415\)s ( \(4748\) iterations)</p>
<h1><a class="anchor" id="sec_log_reg"></a>
Logistic Regression</h1>
<p>Here we solve the following \(\ell_1\)-regularized <a href="https://en.wikipedia.org/wiki/Logistic_regression">logistic regression</a> problem:</p>
<p class="formulaDsp">
\[ \mathrm{Minimize}_w\ \lambda \|w\|_1 - \sum_{i}\log(1+\exp(a&#39; w_i + b)) \]
</p>
<div class="fragment"><div class="line">density = 0.1;</div>
<div class="line">p = 1000;   % features</div>
<div class="line">q = 10*p;   % total samples</div>
<div class="line">w_true = sprandn(p,1,0.2);</div>
<div class="line">X_tmp = 3*sprandn(p, q, density);</div>
<div class="line">ips = -w_true&#39;*X_tmp;</div>
<div class="line">ps = (exp(ips)./(1 + exp(ips)))&#39;;</div>
<div class="line">labels = 2*(rand(q,1) &lt; ps) - 1;</div>
<div class="line">X_pos = X_tmp(:,labels==1);</div>
<div class="line">X_neg = X_tmp(:,labels==-1);</div>
<div class="line">X = [X_pos -X_neg]; % include labels with data</div>
<div class="line">lam = 2; </div>
</div><!-- fragment --><p>We formulate the problem as follows:</p>
<div class="fragment"><div class="line">tolerance = 1e-3;</div>
<div class="line">cvx_begin</div>
<div class="line">   cvx_solver <a class="code" href="scs_8h.html#a3b4841ccbabf8aaa56f3758bf8d771c1">scs</a></div>
<div class="line">   cvx_solver_settings(<span class="stringliteral">&#39;eps&#39;</span>, tolerance,...</div>
<div class="line">     <span class="stringliteral">&#39;do_super_scs&#39;</span>, 1,...</div>
<div class="line">     <span class="stringliteral">&#39;ls&#39;</span>, 5,...</div>
<div class="line">     <span class="stringliteral">&#39;memory&#39;</span>, 50)</div>
<div class="line">   variable w(p)</div>
<div class="line">   minimize(sum(log_sum_exp([sparse(1,q);w&#39;*X])) + lam * norm(w,1))       </div>
<div class="line">cvx_end</div>
</div><!-- fragment --><p>For \(\epsilon=10^{-3}\), SuperSCS terminates after \(131\)s ( \(134\) iterations), while SCS requires \(329\)s ( \(675\) iterations).</p>
<p>For \(\epsilon=10^{-4}\), SuperSCS requires \(179\)s ( \(183\) iterations), whereas SCS still requires as much as \(497\)s ( \(983\) iterations).</p>
<p>In both cases, SuperSCS is about \(2.5\) times faster.</p>
<h1><a class="anchor" id="sec_p_norm"></a>
Minimization of p-norm</h1>
<p>Consider the problem </p>
<p class="formulaDsp">
\begin{eqnarray*} &amp;&amp;\mathrm{Minimize}_x\ \|x\|_p\\ &amp;&amp;Gx = f \end{eqnarray*}
</p>
<p>This is the problem formulation in CVX</p>
<div class="fragment"><div class="line">n = 2000;</div>
<div class="line">m = ceil(n/4);</div>
<div class="line"></div>
<div class="line">density = 0.1;</div>
<div class="line">G = sprandn(m,n,density);</div>
<div class="line">f = randn(m,1) * n * density;</div>
<div class="line">pow = 1.5;</div>
<div class="line"></div>
<div class="line">tic</div>
<div class="line">cvx_begin</div>
<div class="line">    cvx_solver <a class="code" href="scs_8h.html#a3b4841ccbabf8aaa56f3758bf8d771c1">scs</a></div>
<div class="line">    cvx_solver_settings(<span class="stringliteral">&#39;eps&#39;</span>, 1e-4,...</div>
<div class="line">        <span class="stringliteral">&#39;do_super_scs&#39;</span>, 0, ...</div>
<div class="line">        <span class="stringliteral">&#39;memory&#39;</span>, 50,...</div>
<div class="line">        <span class="stringliteral">&#39;use_indirect&#39;</span>, 0);</div>
<div class="line">    variable x(n)</div>
<div class="line">    minimize(norm(x, pow))</div>
<div class="line">    subject to</div>
<div class="line">      G*x == f</div>
<div class="line">    cvx_end</div>
<div class="line">toc</div>
</div><!-- fragment --><p>For \(\epsilon=10^{-3}\), SuperSCS converged after \(11.3\)s ( \(1355\) iterations) , while SCS required \(39\)s ( \(4911\) iters).</p>
<p>For \(\epsilon=10^{-4}\), SuperSCS terminated after 17s ( \(4909\) iterations), while SCS failed to terminate within \(10^4\) iterations.</p>
<h1><a class="anchor" id="sec_another_problem"></a>
Norm-constrained minimum-norm problem</h1>
<p>Here we solve a constrained problem of the form</p>
<p class="formulaDsp">
\begin{eqnarray*} &amp;&amp;\mathrm{Minimize}_x\ \|Ax-b\|\\ &amp;&amp;\|Gx\| \leq 1 \end{eqnarray*}
</p>
<p>with \(x\in\mathbb{R}^m\), \(A\in\mathbb{R}^{m\times n}\) and \(G\in\mathbb{R}^{2n\times n}\).</p>
<p>The problem data are:</p>
<div class="fragment"><div class="line">m = 3000; </div>
<div class="line">n = ceil(m/2);</div>
<div class="line">A = sprandn(m,n,0.5,0.01);</div>
<div class="line">b = 10*randn(m,1);</div>
<div class="line">G = 2*sprandn(2*n, n, 0.1);</div>
</div><!-- fragment --><p>And we need to solve it up to an accuracy of \(\epsilon=10^{-3}\).</p>
<p>The problem is formulated in CVX as follows:</p>
<div class="fragment"><div class="line">tic;</div>
<div class="line">cvx_begin</div>
<div class="line">    cvx_solver <a class="code" href="scs_8h.html#a3b4841ccbabf8aaa56f3758bf8d771c1">scs</a></div>
<div class="line">    cvx_solver_settings(<span class="stringliteral">&#39;eps&#39;</span>, 1e-3,...</div>
<div class="line">        <span class="stringliteral">&#39;do_super_scs&#39;</span>, 1, ...</div>
<div class="line">        <span class="stringliteral">&#39;memory&#39;</span>, 20);</div>
<div class="line">    variable x(n)</div>
<div class="line">    minimize( norm(A*x-b) )</div>
<div class="line">    subject to</div>
<div class="line">        norm(G*x) &lt;= 1</div>
<div class="line">cvx_end</div>
<div class="line">toc</div>
</div><!-- fragment --><p>SuperSCS converges after \(37.1\)s ( \(116\) iterations).</p>
<p>On the other hand, SCS did not converge after \(242s\) ( \(5000\) iterations).</p>
<p>Note that SuperSCS can attain much higher precision; for instance, it converges with \(\epsilon=10^{-4}\) in \(41.2\)s ( \(131\) iterations) and with \(\epsilon=10^{-6}\) it converges after \(58\)s ( \(194\) iterations).</p>
<h1><a class="anchor" id="sec_matrix_completion"></a>
Regularized matrix completion problem</h1>
<p>Let \(M\) be a given matrix whose elements \(\{(i,j)\}_{i\in I, j\in J}\) are missing.</p>
<p>Here, we formulate the <a href="https://en.wikipedia.org/wiki/Matrix_completion">matrix completion problem</a> as a nuclear norm minimization problem.</p>
<p class="formulaDsp">
\begin{eqnarray*} &amp;&amp;\mathrm{Minimize}_{X}\ \|X-M\|_{\mathrm{fro}}^2 + \lambda \|X\|_{*}\\ &amp;&amp;X_{i&#39;,j&#39;} = M_{i&#39;,j&#39;},\ \forall i&#39;\notin I,\ j&#39;\notin J \end{eqnarray*}
</p>
<p>Problem formulation: </p>
<div class="fragment"><div class="line">rng(<span class="stringliteral">&#39;default&#39;</span>);</div>
<div class="line">rng(1);</div>
<div class="line">m = 500;</div>
<div class="line">n = 200;</div>
<div class="line">percentage_missing = 0.9;</div>
<div class="line">n_nan = ceil(percentage_missing*m*n);</div>
<div class="line">M = randn(m, n);</div>
<div class="line">idx = randperm(m*n);</div>
<div class="line">idx_nan = idx(1:n_nan);</div>
<div class="line">idx_not_nan = idx(n_nan+1:end);</div>
<div class="line">M(idx_nan) = nan;</div>
<div class="line">lam = 1e-3;</div>
</div><!-- fragment --><p>Problem solution: </p>
<div class="fragment"><div class="line">scs_options = SuperSCSConfig.andersonConfig(<span class="stringliteral">&#39;tolerance&#39;</span>, 1e-4,...</div>
<div class="line">    <span class="stringliteral">&#39;do_record_progress&#39;</span>,1,<span class="stringliteral">&#39;verbose&#39;</span>,1,<span class="stringliteral">&#39;memory&#39;</span>,5);</div>
<div class="line"></div>
<div class="line">cvx_begin sdp</div>
<div class="line">    cvx_solver <a class="code" href="scs_8h.html#a3b4841ccbabf8aaa56f3758bf8d771c1">scs</a></div>
<div class="line">    scs_set_options(scs_options)</div>
<div class="line">    variable X(m,n)</div>
<div class="line">    minimize (lam * norm_nuc(X) + sum_square(X(idx_not_nan)-M(idx_not_nan)))</div>
<div class="line">    subject to</div>
<div class="line">        X(idx_not_nan)==M(idx_not_nan)</div>
<div class="line">cvx_end</div>
</div><!-- fragment --><dl class="section see"><dt>See Also</dt><dd><a class="el" href="page_cvx_examples.html#sec_superscs_config_factory">easy configuration</a></dd></dl>
<p>SuperSCS (with Broyden directions and memory 50) converges in \(22s\) ( \(128\) iterations), whereas SCS takes \(43s\) ( \(677\) iterations).</p>
<h1><a class="anchor" id="sec_portfolio"></a>
Portfolio selection</h1>
<p>Here we solve the following portfolio selection problem:</p>
<p class="formulaDsp">
\begin{eqnarray*} &amp;&amp;\mathrm{Maximize}_z\ \mu&#39;z - \gamma z&#39;\Sigma z\\ &amp;&amp;1&#39;z = 1\\ &amp;&amp;z \geq 0, \end{eqnarray*}
</p>
<p>where \(z\) is the portfolio of assets, \(\mu\) is the vector of expected returns, \(\gamma\) is a risk-aversion parameter and \(\Sigma=F&#39;F+D\) is the asset return covariance matrix with \(F\) being the <em>factor loading matrix</em> and \(D\) is a diagonal matrix called the <em>asset-specific risk</em>.</p>
<p>The problem is generated as follows:</p>
<div class="fragment"><div class="line">density = 0.1;</div>
<div class="line">rc = 0.5; % estimated reciprocal condition number</div>
<div class="line"></div>
<div class="line">n = 100000;</div>
<div class="line">m = 100;</div>
<div class="line"></div>
<div class="line">mu = exp(0.01 * randn(n, 1)) - 1; % returns</div>
<div class="line">D = rand(n,1) / 10; % idiosyncratic risk</div>
<div class="line">F = sprandn(n, m, density, rc) / 10; % factor model</div>
<div class="line">gamma = 1;</div>
<div class="line">B = 1;</div>
</div><!-- fragment --><p>The problem is solved using CVX as follows:</p>
<div class="fragment"><div class="line">cvx_begin</div>
<div class="line">    cvx_solver <a class="code" href="scs_8h.html#a3b4841ccbabf8aaa56f3758bf8d771c1">scs</a></div>
<div class="line">    cvx_solver_settings(<span class="stringliteral">&#39;eps&#39;</span>, 1e-4,...</div>
<div class="line">        <span class="stringliteral">&#39;do_super_scs&#39;</span>, 1,...</div>
<div class="line">        <span class="stringliteral">&#39;direction&#39;</span>, 100,...</div>
<div class="line">        <span class="stringliteral">&#39;memory&#39;</span>, 100)</div>
<div class="line">    variable x(n)</div>
<div class="line">    maximize(mu&#39;*x - gamma*(sum_square(F&#39;*x) + sum_square(D.*x)))r</div>
<div class="line">    sum(x) == B</div>
<div class="line">    x &gt;= 0</div>
<div class="line">cvx_end</div>
</div><!-- fragment --><p>The above problem is solved in \(46.7\)s and at \(292\) iterations with SuperSCS running with restarted Broyden directions with memory equal to \(100\).</p>
<p>The respective results for SCS are \(157\)s and \(3050\) iterations (approximately \(3.3\) times slower).</p>
<p>For a lower tolerance of \(\epsilon=10^{-3}\) , SuperSCS with memory equal to \(100\) terminates at \(162\) iterations after \(23.5\)s while SCS converges after \(43.9\)s at \(787\) iterations.</p>
<h1><a class="anchor" id="sec_pca"></a>
Principal component analysis</h1>
<p>Here we solve the following sparse <a href="https://en.wikipedia.org/wiki/Principal_component_analysis">PCA</a> problem (using an \(\ell_1\)-regularization).</p>
<p>The problem has the form</p>
<p class="formulaDsp">
\begin{eqnarray*} &amp;&amp;\mathrm{Maximize}_X\ \mathrm{trace}(SX) - \lambda \|X\|_1\\ &amp;&amp; \mathrm{trace}(X) = 1\\ &amp;&amp; X = X&#39; \succeq 0 \end{eqnarray*}
</p>
<div class="fragment"><div class="line">d = 200;</div>
<div class="line">p = 10;</div>
<div class="line">A = sprandn(p,d,0.3,0.0001);</div>
<div class="line">S = full(A<span class="stringliteral">&#39;*A);</span></div>
<div class="line"><span class="stringliteral">lam = 2;</span></div>
<div class="line"><span class="stringliteral"></span></div>
<div class="line"><span class="stringliteral">cvx_begin sdp</span></div>
<div class="line"><span class="stringliteral">    cvx_solver scs</span></div>
<div class="line"><span class="stringliteral">    cvx_solver_settings(&#39;</span>eps<span class="stringliteral">&#39;, 1e-3,...</span></div>
<div class="line"><span class="stringliteral">       &#39;</span>verbose<span class="stringliteral">&#39;, 1,...</span></div>
<div class="line"><span class="stringliteral">       &#39;</span>do_super_scs<span class="stringliteral">&#39;, 0, ...</span></div>
<div class="line"><span class="stringliteral">       &#39;</span>direction<span class="stringliteral">&#39;, 100, ...</span></div>
<div class="line"><span class="stringliteral">       &#39;</span>memory<span class="stringliteral">&#39;, 100);</span></div>
<div class="line"><span class="stringliteral">    variable X(d,d) symmetric</span></div>
<div class="line"><span class="stringliteral">    minimize(-trace(S*X) + lam*norm(X,1))</span></div>
<div class="line"><span class="stringliteral">    trace(X)==1</span></div>
<div class="line"><span class="stringliteral">    X&gt;=0</span></div>
<div class="line"><span class="stringliteral">cvx_end  </span></div>
</div><!-- fragment --><p>SuperSCS: \(7.6\)s, \(95\) iterations</p>
<p>SCS: \(65\)s, \(2291\) iterations</p>
<p>Speed-up: \(\times 8.6\)</p>
<h1><a class="anchor" id="sec_superscs_config_factory"></a>
Easy configuration</h1>
<p>Instead of using <code>cvx_solver_settings</code> to provide the SuperSCS configuration options, you may use <code>scs_set_options</code> to which you may pass a <code>SuperSCSConfig</code> object which can be constructed from the namesake factory class.</p>
<p>Here is an example:</p>
<div class="fragment"><div class="line">solver_options = SuperSCSConfig.andersonConfig();</div>
<div class="line">cvx_begin </div>
<div class="line">cvx_solver <a class="code" href="scs_8h.html#a3b4841ccbabf8aaa56f3758bf8d771c1">scs</a></div>
<div class="line">scs_set_options(solver_options)</div>
<div class="line">   % describe your problem here</div>
<div class="line">cvx_end</div>
</div><!-- fragment --><p>Ready-to-use sets of configuration options are the following</p>
<ul>
<li><code>SuperSCSConfig.andersonConfig()</code> Anderson's acceleration with memory equal to 10</li>
<li><code>SuperSCSConfig.broydenConfig()</code> Restarted Broyden method with memory equal to 50</li>
<li><code>SuperSCSConfig.fprDirectionConfig()</code></li>
<li><code>SuperSCSConfig.douglasRachfordConfig()</code> simple Douglas-Rachford algorithm</li>
<li><code>SuperSCSConfig.scsConfig()</code> original SCS implementation</li>
</ul>
<p>You may use <code>SuperSCSConfig</code> and override some of the default parameters as follows</p>
<div class="fragment"><div class="line">solver_options = SuperSCSConfig.andersonConfig(<span class="stringliteral">&#39;memory&#39;</span>, 12, <span class="stringliteral">&#39;tolerance&#39;</span>, 1e-4);</div>
</div><!-- fragment --><dl class="section see"><dt>See Also</dt><dd><a class="el" href="page_doc.html">SuperSCS: first steps</a> </dd>
<dd>
<a class="el" href="examples_in_c.html">SuperSCS in C: examples</a> </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Aug 28 2018 15:45:56 for SuperSCS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
